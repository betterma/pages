# 睡眠统计功能

## 功能概述

睡眠统计是一个用于记录和分析个人睡眠情况的工具，帮助用户了解自己的睡眠模式和习惯。

## 主要功能

### 1. 睡眠记录
- **记录内容**：上床时间、睡着时间、起床时间、备注
- **自动计算**：系统自动计算睡眠时长和睡眠效率
- **日期管理**：默认记录昨天的睡眠情况，支持修改日期

### 2. 数据统计
- **平均睡眠时长**：显示所有记录的平均睡眠时长
- **平均入睡时间**：显示平均入睡时间（24小时制）
- **平均起床时间**：显示平均起床时间（24小时制）
- **平均上床时间**：显示平均上床时间（24小时制）
- **记录天数**：显示总记录天数

### 3. 趋势图表
- **主要趋势图表**：
  - 睡眠时长趋势
  - 入睡时间趋势
  - 起床时间趋势
  - 睡眠效率趋势
- **多指标对比图表**：同时显示上床时间、入睡时间、起床时间的变化趋势
- **上床时间趋势图表**：专门展示上床时间的变化模式
- **时间范围**：支持7天、30天、90天和全部记录
- **交互功能**：鼠标悬停显示详细数据，支持图表切换

### 4. 数据管理
- **编辑记录**：支持修改已保存的睡眠记录
- **删除记录**：可以删除不需要的记录
- **数据导出**：支持导出CSV格式的数据文件
- **数据刷新**：实时同步最新数据

## 数据存储

- **存储方式**：基于GitHub仓库存储，每个记录保存为独立的JSON文件
- **文件位置**：`sleep/records/YYYY-MM-DD.json`
- **数据格式**：标准JSON格式，包含完整的睡眠信息

## 使用方法

### 添加记录
1. 点击"添加记录"按钮
2. 选择记录日期（默认为昨天）
3. 输入上床时间、睡着时间、起床时间
4. 可选添加备注信息
5. 点击保存

### 查看统计
- 统计概览卡片显示在页面顶部
- 趋势图表支持多种视图和时间范围
- 最近记录列表显示最近的5条记录

### 编辑记录
1. 在最近记录列表中点击编辑按钮
2. 修改相关信息
3. 保存更改

## 技术特点

- **响应式设计**：支持移动端和桌面端
- **实时更新**：数据变化后立即更新图表和统计
- **数据验证**：自动计算和验证时间数据的合理性
- **跨设备同步**：基于GitHub的数据存储，支持多设备访问
- **ECharts图表**：专业的数据可视化框架，支持丰富的图表类型

## 注意事项

1. 需要网络连接才能访问和保存数据
2. 时间输入使用24小时制格式
3. 睡眠时长自动计算，支持跨天情况
4. 删除记录后无法恢复，请谨慎操作

## 文件结构

```
sleep/
├── index.html          # 主页面
├── assets/
│   ├── css/
│   │   └── style.css  # 样式文件
│   └── js/
│       ├── auth.js    # 认证模块
│       ├── storage.js # 存储管理
│       └── sleep.js   # 主要逻辑
└── README.md           # 说明文档
```
